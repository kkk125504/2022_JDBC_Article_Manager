### 구조												     

### App → articleController → articleService → articleDao → DB

​                                                            →  인자 전달                            → 인자 전달                    



### 실질적으로 DB에 접근하는 Dao에 conn객체 전달 과정

```java
public class ArticleController extends Controller {
	private ArticleService articleService;
public ArticleController(Connection conn, Scanner sc) {
	super(sc);
	articleService = new ArticleService(conn);
}
```

- Controller에서 conn을 service의 생성자를 통하여 전달하고

```java
public class ArticleService {
	private ArticleDao articleDao;
public ArticleService(Connection conn) {
	articleDao = new ArticleDao(conn);
}
```

- Service는 Controller로 전달받은 conn을 Dao의 생성자를 통해 전달한다.

```java
public class ArticleDao {
	private Connection conn;
public ArticleDao(Connection conn) {
	this.conn = conn;
}
```

- Dao에서 conn을 이용해 쿼리문 실행

---

### insert MVC 구조

#### 1. articleController.doWrite( )

```java
public void doWrtie() {
		System.out.println("== 게시물 작성 ==");
		System.out.printf("제목 : ");
		String title = sc.nextLine();
		System.out.printf("내용 : ");
		String body = sc.nextLine();
	int id = articleService.doWrite(title, body);
	System.out.printf("%d번 게시물이 생성되었습니다.\n", id);
}
```

- title과 body를 articleService.doWrite(title, body);에 인자로 넘겨주고 

#### 2. articleService.doWrite(title,body)

```java
public int doWrite(String title, String body) {
		return articleDao.doWrite(title,body);
	}
```

- articleService.doWrite(title, body)에서는 title, body(인자) 를 articleDao.doWrtie(title,body)에 전달한다.

#### 3. articleDao.doWrite(title,body)

```java
public int doWrite(String title, String body) {
		SecSql sql = new SecSql();
		sql.append("INSERT INTO article");
		sql.append(" SET regDate = NOW()");
		sql.append(", updateDate = NOW()");
		sql.append(", title = ?", title);
		sql.append(", `body` = ?", body);
		return DBUtil.insert(conn, sql);
	}
```

- 실질적으로 articleDao에서 DB에 insert하게 한다.
- 인자를 이용해 articleControll에서 service로 service에서 dao로 인자를 전달하는 방식으로 dao에서 인자를 통해 요청받은것 처리
- 즉,  articleController에서 articleService에게 요청을하고 articleService는 articleDao에게 DB의 데이터를 수정, 추가, 삭제, 조회 등을 요청한다.
  나머지 modify, delete, detail, list도 매개변수와 리턴타입만 다를뿐 비슷한 내용이다.